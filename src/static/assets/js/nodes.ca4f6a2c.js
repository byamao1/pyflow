(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["nodes"],{"2e89":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"node-page"},[a("div",{staticClass:"tree-page"},[t._m(0),a("div",{staticClass:"tree-page-body scrollBar"},t._l(t.trees,(function(e){return a("div",{key:e.id,staticClass:"tree-menu-group"},[a("TreeItem",{attrs:{treeItem:e},on:{selectNode:t.selectIteFn}})],1)})),0)]),a("div",{staticClass:"node-body"},[a("div",{staticClass:"node-body-header"},[a("a",{staticClass:"save-btn",attrs:{href:"javascript:;"},on:{click:t.saveFn}},[t._v(t._s(t.$t("btn.save")))])]),a("div",{staticClass:"node-body-content"},[a("div",{staticClass:"code"},[a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[a("label",{attrs:{for:"nodeid"}},[t._v("ID:")]),a("jdk-input",{staticClass:"node-input",attrs:{id:"nodeid"},model:{value:t.node.id,callback:function(e){t.$set(t.node,"id",e)},expression:"node.id"}})],1),a("div",{staticClass:"title"},[a("label",{attrs:{for:"title"}},[t._v(t._s(t.$t("node.inputTitle"))+":")]),a("jdk-input",{staticClass:"node-input",attrs:{id:"title"},model:{value:t.node.title,callback:function(e){t.$set(t.node,"title",e)},expression:"node.title"}})],1)]),t._m(1)]),a("div",{staticClass:"option"},[a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("node.resuletConfig")))])]),a("div",{staticClass:"content scrollBar"},t._l(t.MODE_OPTIONS,(function(e){return a("div",{key:e.value,staticClass:"card",class:{close:!e.active,open:e.active}},[a("div",{staticClass:"card-title"},[a("svg-icon",{staticClass:"menu-arrow-icon",attrs:{icon:"icon-arrow-down"},nativeOn:{click:function(a){return t.toggelActiveFn(e)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.node.modes,expression:"node.modes"}],staticClass:"jdk-checkbox",attrs:{type:"checkbox",disabled:e.disabled},domProps:{value:e.value,checked:Array.isArray(t.node.modes)?t._i(t.node.modes,e.value)>-1:t.node.modes},on:{change:function(a){var s=t.node.modes,i=a.target,n=!!i.checked;if(Array.isArray(s)){var l=e.value,o=t._i(s,l);i.checked?o<0&&t.$set(t.node,"modes",s.concat([l])):o>-1&&t.$set(t.node,"modes",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.node,"modes",n)}}}),a("span",[t._v(t._s(e.name))])],1),a("div",{staticClass:"card-content"},[a("img",{attrs:{src:e.image,alt:""}})])])})),0)])]),a("div",{staticClass:"node-body-footer"},[a("div",{staticClass:"params-box"},[a("h4",{staticClass:"param-title"},[t._v(t._s(t.$t("node.paramsTable.title"))+":")]),a("ul",[a("li",{staticClass:"param-item theader"},[a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 25%"}},[t._v(t._s(t.$t("node.paramsTable.name")))]),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 15%"}},[t._v(t._s(t.$t("node.paramsTable.type")))]),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 15%"}},[t._v(t._s(t.$t("node.paramsTable.isShow")))]),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 45%"}},[t._v(t._s(t.$t("node.paramsTable.default")))])]),t._l(t.node.port.input,(function(e,s){return a("li",{key:s,staticClass:"param-item"},[a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 25%"}},[t._v(t._s(e.name))]),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 15%"}},[a("jdk-select",{attrs:{options:t.typeOptions},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"input.type"}})],1),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 15%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.show,expression:"input.show"}],staticClass:"jdk-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.show)?t._i(e.show,null)>-1:e.show},on:{change:function(a){var s=e.show,i=a.target,n=!!i.checked;if(Array.isArray(s)){var l=null,o=t._i(s,l);i.checked?o<0&&t.$set(e,"show",s.concat([l])):o>-1&&t.$set(e,"show",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(e,"show",n)}}})]),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 45%"}},[a("jdk-select",{staticStyle:{"min-width":"80px",width:"80px"},attrs:{options:t.defaultOptions},model:{value:e.default.type,callback:function(a){t.$set(e.default,"type",a)},expression:"input.default.type"}}),"Select"===e.default.type?a("div",{staticClass:"flex-box"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"input.value"}],staticClass:"jdk-select",on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"value",a.target.multiple?s:s[0])}}},t._l(e.default.option,(function(e){return a("option",{key:e.id,domProps:{value:e.value}},[t._v(" "+t._s(e.name)+" ")])})),0),a("jdk-button",{staticClass:"primary small",nativeOn:{click:function(a){return t.addFn(e.default)}}},[t._v(" +"+t._s(t.$t("btn.insert"))+" ")])],1):t._e(),"Input"===e.default.type?a("div",{staticClass:"flex-box"},[a("jdk-input",{attrs:{placeholder:t.$t("node.paramsTable.defaultPlaceholder")},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"input.value"}})],1):t._e()],1)])}))],2)]),a("div",{staticClass:"return-box"},[a("h4",{staticClass:"param-title"},[t._v("return:")]),a("ul",[a("li",{staticClass:"param-item theader"},[a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 50%"}},[t._v(t._s(t.$t("node.paramsTable.name")))]),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 40%"}},[t._v(t._s(t.$t("node.paramsTable.type")))]),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 10%"}},[t._v(" ")])]),t._l(t.outputs,(function(e,s){return a("li",{key:e.id,staticClass:"param-item"},[a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 50%"}},[a("jdk-input",{model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"out.name"}})],1),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 40%"}},[a("jdk-select",{staticStyle:{"min-width":"80px",width:"80px"},attrs:{options:t.typeOptions},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"out.type"}})],1),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 10%"}},[a("a",{staticClass:"delete-link",attrs:{href:"javascript:;",title:"删除"},on:{click:function(e){return t.deletOutFn(s)}}},[t._v("delete")])])])})),a("div",{staticClass:"btn-center-block"},[a("jdk-button",{staticClass:"small primary",nativeOn:{click:function(e){return t.outPushFn.apply(null,arguments)}}},[t._v(" +"+t._s(t.$t("node.paramsTable.addOne"))+" ")])],1)],2)])])]),a("jdk-modal",{attrs:{visible:t.selectDialogBool,title:"Select"},on:{"update:visible":function(e){t.selectDialogBool=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("jdk-button",{staticClass:"jdk-button small danger",nativeOn:{click:function(e){return t.selectDialogFn(!1)}}},[t._v(" "+t._s(t.$t("btn.cancel"))+" ")]),a("jdk-button",{staticClass:"jdk-button small primary",nativeOn:{click:function(e){return t.saveSelectFn.apply(null,arguments)}}},[t._v(t._s(t.$t("btn.save")))])]},proxy:!0}])},[[a("div",{staticClass:"flex-table"},[a("div",{staticClass:"param-item"},[a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 50%"}},[t._v("name")]),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 40%"}},[t._v("value")]),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 10%"}},[t._v(" ")])]),t._l(t.tempSelect,(function(e,s){return a("div",{key:e.id,staticClass:"param-item"},[a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 50%"}},[a("jdk-input",{model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 40%"}},[a("jdk-input",{model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1),a("div",{staticClass:"param-name",staticStyle:{flex:"1 0 10%","padding-left":"4px"}},[a("a",{staticClass:"delete-link",attrs:{href:"javascript:;",title:"删除"},on:{click:function(e){return t.deletSelectFn(s)}}},[t._v("delete")])])])})),a("div",{staticClass:"btn-center-block"},[a("jdk-button",{staticClass:"small primary",nativeOn:{click:function(e){return t.selectPushFn.apply(null,arguments)}}},[t._v(" +"+t._s(t.$t("node.paramsTable.addOne"))+" ")])],1)],2)]],2)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tree-page-header"},[a("div",{staticClass:"title"},[t._v("Nodes")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("textarea",{attrs:{id:"nodecoder"}})])}],n=(a("caad"),a("2532"),a("d81d"),a("b64b"),a("ac1f"),a("1276"),a("498a"),a("00b4"),a("b0c0"),a("fb6a"),a("e9c4"),a("a434"),a("781b")),l=a.n(n),o=a("bf73"),c=a.n(o),r=a("f743"),d=a("ca00"),u=a("aa1b"),p=a("1634"),m=a("3066"),v={name:"Node",components:{jdkButton:r["a"],TreeItem:m["a"]},mixins:[p["a"]],data:function(){return{MODE_OPTIONS:u["a"],trees:[],treeIds:[],node:{id:"xxx.xxx",title:"一级标题.二级标题",func:"def func():\n\t return None",port:{input:[],output:[{id:Object(d["e"])(),name:"out",type:"String"}]},modes:["data-view"]},tempInput:{},tempSelect:[],selectDialogBool:!1,typeOptions:[{name:"Boolean",value:"Boolean"},{name:"Int",value:"Int"},{name:"Long",value:"Long"},{name:"Float",value:"Float"},{name:"String",value:"String"},{name:"List",value:"List"},{name:"Json",value:"Json"},{name:"File",value:"File"}],defaultOptions:[{name:"Select",value:"Select"},{name:"Input",value:"Input"},{name:"None",value:"None"}],editor:void 0}},computed:{iscreate:function(){return!this.treeIds||!this.treeIds.includes(this.node.id)},outputs:function(){var t=this.node.port.output;return t.length&&!t[0]["id"]&&(t=t.map((function(t){return t.id=Object(d["e"])(),t}))),t}},mounted:function(){this.initCodeEditor(),this.getTree()},methods:{initCodeEditor:function(){var t=this;this.editor=c.a.fromTextArea(document.getElementById("nodecoder"),{line:!0,lineNumbers:!0,indentUnit:2,lineWrapping:!0,tabSize:4,mode:"python",theme:"icecoder",gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],hintOptions:{completeSingle:!1,hint:c.a.hint.python},scrollbarStyle:"overlay",lint:!0,matchBrackets:!0,foldGutter:!0,autoRefresh:!0}),this.editor.setSize("100%","100%"),this.editor.setValue(this.node.func),this.editor.on("inputRead",(function(t,e){t.showHint()})),this.editor.on("change",(function(e,a){var s=e.getValue();t.nodePort(s)}))},getTree:function(){var t=this;l.a.get("/nodes",(function(e){t.$store.setItem("trees",e),t.treeIds=Object.keys(e),t.trees=t.transData(e)}))},nodePort:function(t){var e=t.trim().split("\n"),a=e[0],s=/def(\s)+func\(([\w|\W]*,?)*\):/g,i=s.test(a),n=this.node;if(i){var l=a.indexOf("("),o=a.indexOf(")"),c=a.substr(l+1,o-l-1),r=c.split(",");n.port.input=n.port&&n.port.input||[];for(var d=0;d<r.length;d++){var u=r[d];if(u&&u.indexOf(":")>-1?u=u.split(":")[0]:u&&u.indexOf("=")>-1&&(u=u.split("=")[0]),n.port.input[d])n.port.input[d].name=u.trim(),n.port.input[d].show=!!n.port.input[d].show,null==n.port.input[d]["default"]&&(n.port.input[d].default=n.port.input[d].default||{type:"None",value:void 0});else{var p={name:u.trim(),type:"String",value:void 0,order:d,show:!0,default:{type:"None"}};n.port.input.push(p)}}r.length<n.port.input.length&&(n.port.input=n.port.input.slice(0,r.length)),this.node.func=t}},insertFn:function(){this.node={id:"xxx.xxx",title:"一级标题.二级标题",func:"def func():\n\t return None",port:{input:[],output:[{id:Object(d["e"])(),name:"out",type:"String"}]},modes:["data-view"]},this.editor.setValue(this.node.func)},saveFn:function(){var t=this,e=this.editor.getValue()||"def func():\n\t return None";this.nodePort(e),this.node.id&&this.node.title&&this.node.id.split(".").length!==this.node.title.split(".").length?this.$message.info("id与title级数不一致"):l.a.ajax({url:"/nodes",contentType:"application/json",type:"POST",data:JSON.stringify(this.node),dataType:"json"}).done((function(e){t.$message.success("保存成功"),t.getTree()}))},selectIteFn:function(t){this.node={},t.modes=t.modes||["data-view"],this.node=t,this.editor.setValue(t.func)},toggelActiveFn:function(t){t.active=!t.active},addFn:function(t){this.tempInput=t,this.tempSelect=t.option||[],this.selectDialogFn(!0)},selectDialogFn:function(t){this.selectDialogBool=!!t},selectPushFn:function(){this.tempSelect.push({id:Object(d["e"])(),name:void 0,value:void 0})},deletSelectFn:function(t){this.tempSelect.splice(t,1)},saveSelectFn:function(){this.selectDialogFn(!1),this.tempInput.option=this.tempSelect,this.tempInput=null,this.tempSelect=[]},outPushFn:function(){this.node.port.output.push({id:Object(d["e"])(),name:"",type:"String"})},deletOutFn:function(t){this.node.port.output.splice(t,1)}},beforeDestroy:function(){this.editor.off("keypress"),this.editor.off("change"),this.editor.toTextArea()}},f=v,h=(a("d953"),a("7dd5"),a("2877")),y=Object(h["a"])(f,s,i,!1,null,"c191688a",null);e["default"]=y.exports},"498a":function(t,e,a){"use strict";var s=a("23e7"),i=a("58a8").trim,n=a("c8d2");s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},"7b0a":function(t,e,a){},"7dd5":function(t,e,a){"use strict";a("e8a8")},c8d2:function(t,e,a){var s=a("5e77").PROPER,i=a("d039"),n=a("5899"),l="​᠎";t.exports=function(t){return i((function(){return!!n[t]()||l[t]()!==l||s&&n[t].name!==t}))}},d953:function(t,e,a){"use strict";a("7b0a")},e8a8:function(t,e,a){}}]);